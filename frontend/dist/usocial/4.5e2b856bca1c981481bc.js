(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(e,t,o){"use strict";o.r(t),o.d(t,"AuthModule",(function(){return h}));var r=o("ofXK"),n=o("tyNb"),i=o("fXoL"),s=o("qXBG");let a=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!this.authService.isLogged()||(this.router.navigate(["/profile"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(s.a),i.Xb(n.b))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=o("3Pt+"),b=o("pLZG"),d=o("qkCY");function l(e,t){if(1&e&&(i.Pb(0,"div",18),i.Pb(1,"div",19),i.Cc(2),i.Ob(),i.Ob()),2&e){const e=i.cc(2);i.xb(2),i.Ec(" ",e.errorMessage," ")}}function u(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",6),i.Pb(1,"h1"),i.Cc(2,"Iniciar sesi\xf3n"),i.Ob(),i.Pb(3,"form",7),i.ac("ngSubmit",(function(){i.sc(e);const t=i.cc();return t.onSubmitLogin(t.loginForm.value)})),i.Pb(4,"div",8),i.Pb(5,"label"),i.Cc(6,"Nombre de usuario "),i.Pb(7,"span",9),i.Cc(8,"*"),i.Ob(),i.Ob(),i.Lb(9,"input",10),i.Ob(),i.Pb(10,"div",8),i.Pb(11,"label"),i.Cc(12,"Contrase\xf1a "),i.Pb(13,"span",9),i.Cc(14,"*"),i.Ob(),i.Ob(),i.Lb(15,"input",11),i.Ob(),i.Pb(16,"div",12),i.Pb(17,"div",13),i.Pb(18,"span",9),i.Cc(19,"* Campos obligatorios"),i.Ob(),i.Ob(),i.Ob(),i.Pb(20,"div",14),i.Pb(21,"div",13),i.Pb(22,"button",15),i.ac("click",(function(){return i.sc(e),i.cc().goToRegister()})),i.Cc(23,"Crear una cuenta"),i.Ob(),i.Ob(),i.Pb(24,"div",13),i.Pb(25,"button",16),i.Cc(26,"Iniciar sesi\xf3n"),i.Ob(),i.Ob(),i.Ob(),i.Pb(27,"div",12),i.Ac(28,l,3,1,"div",17),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.cc();i.xb(3),i.ic("formGroup",e.loginForm),i.xb(22),i.ic("disabled",e.loginForm.invalid),i.xb(3),i.ic("ngIf",e.errorMessage)}}function g(e,t){if(1&e&&(i.Pb(0,"div",18),i.Pb(1,"div",19),i.Cc(2),i.Ob(),i.Ob()),2&e){const e=i.cc(2);i.xb(2),i.Ec(" ",e.errorMessage," ")}}function p(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",20),i.Pb(1,"h1"),i.Cc(2,"Crear cuenta"),i.Ob(),i.Pb(3,"form",7),i.ac("ngSubmit",(function(){i.sc(e);const t=i.cc();return t.onSubmitRegister(t.registerForm.value)})),i.Pb(4,"div",8),i.Pb(5,"label"),i.Cc(6,"Nombre completo "),i.Pb(7,"span",9),i.Cc(8,"*"),i.Ob(),i.Ob(),i.Lb(9,"input",21),i.Ob(),i.Pb(10,"div",8),i.Pb(11,"label"),i.Cc(12,"Nombre de usuario "),i.Pb(13,"span",9),i.Cc(14,"*"),i.Ob(),i.Ob(),i.Lb(15,"input",22),i.Ob(),i.Pb(16,"div",8),i.Pb(17,"label"),i.Cc(18,"Correo electr\xf3nico "),i.Pb(19,"span",9),i.Cc(20,"*"),i.Ob(),i.Ob(),i.Lb(21,"input",23),i.Ob(),i.Pb(22,"div",8),i.Pb(23,"div",24),i.Lb(24,"img",25),i.Pb(25,"button",26),i.ac("click",(function(){return i.sc(e),i.qc(28).click()})),i.Cc(26,"Elegir foto de perfil"),i.Ob(),i.Ob(),i.Pb(27,"input",27,28),i.ac("change",(function(t){return i.sc(e),i.cc().handleUpload(t)})),i.Ob(),i.Ob(),i.Pb(29,"div",8),i.Pb(30,"label"),i.Cc(31,"Contrase\xf1a "),i.Pb(32,"span",9),i.Cc(33,"*"),i.Ob(),i.Ob(),i.Lb(34,"input",11),i.Ob(),i.Pb(35,"div",8),i.Pb(36,"label"),i.Cc(37,"Repite la contrase\xf1a "),i.Pb(38,"span",9),i.Cc(39,"*"),i.Ob(),i.Ob(),i.Lb(40,"input",29),i.Ob(),i.Pb(41,"div",12),i.Pb(42,"div",13),i.Pb(43,"span",9),i.Cc(44,"* Campos obligatorios"),i.Ob(),i.Ob(),i.Ob(),i.Pb(45,"div",14),i.Pb(46,"div",13),i.Pb(47,"button",15),i.ac("click",(function(){return i.sc(e),i.cc().goToLogin()})),i.Cc(48,"Ya tengo una cuenta"),i.Ob(),i.Ob(),i.Pb(49,"div",13),i.Pb(50,"button",16),i.Cc(51,"Registrarme"),i.Ob(),i.Ob(),i.Ob(),i.Pb(52,"div",12),i.Ac(53,g,3,1,"div",17),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.cc();i.xb(3),i.ic("formGroup",e.registerForm),i.xb(21),i.ic("src",e.registerForm.controls.photo.value||"/assets/no-photo.png",i.vc),i.xb(26),i.ic("disabled",e.registerForm.invalid),i.xb(3),i.ic("ngIf",e.errorMessage)}}const m=[{path:"",component:(()=>{class e{constructor(e,t,o,r,n){this.fb=e,this.authService=t,this.storage=o,this.router=r,this.activeRoute=n,this.showRegister=!1,this.errorMessage="",this.backTo=void 0,this.loginForm=this.fb.group({username:new c.d("",c.p.required),password:new c.d("",c.p.required)}),this.registerForm=this.fb.group({name:new c.d("",c.p.required),username:new c.d("",c.p.required),email:new c.d("",c.p.required),password:new c.d("",c.p.required),repeatPassword:new c.d("",c.p.required),photo:new c.d(null)}),this.backTo=this.activeRoute.snapshot.queryParams.backTo}goToRegister(){this.errorMessage="",this.registerForm.reset(),this.showRegister=!0}goToLogin(){this.errorMessage="",this.loginForm.reset(),this.showRegister=!1}onSubmitLogin(e){this.errorMessage="",this.authService.login(e).pipe(Object(b.a)(e=>e.ok&&200===e.statuscode)).subscribe(e=>{this.storage.saveToken(e.data.token),this.storage.saveUsername(e.data.user._id),this.router.navigate([this.backTo||"/profile"])},({error:e})=>{this.errorMessage=e.message})}onSubmitRegister(e){this.errorMessage="",e.repeatPassword===e.password?this.authService.register(e).pipe(Object(b.a)(e=>e.ok&&200===e.statuscode)).subscribe(e=>{this.storage.saveToken(e.data.token),this.storage.saveUsername(e.data.user._id),this.router.navigate(["/profile"])},({error:e})=>{this.errorMessage=e.message}):this.errorMessage="Las contrase\xf1as no coinciden"}handleUpload(e){if(e.target.files[0]){const t=e.target.files[0],o=new FileReader;o.readAsDataURL(t),o.onload=()=>{this.registerForm.controls.photo.setValue(o.result)}}}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(c.c),i.Kb(s.a),i.Kb(d.a),i.Kb(n.b),i.Kb(n.a))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"sidenav"],[1,"login-main-text"],[1,"main"],[1,"col-md-6","col-sm-12"],["class","login-form",4,"ngIf","ngIfElse"],["RegisterForm",""],[1,"login-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"text-danger"],["formControlName","username","type","text","placeholder","Escribe tu nombre de usuario...",1,"form-control"],["formControlName","password","type","password","placeholder","Escribe tu contrase\xf1a...",1,"form-control"],[1,"row"],[1,"col"],[1,"row","mt-2"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["type","submit",1,"btn","btn-black","btn-block",3,"disabled"],["class","col mt-3",4,"ngIf"],[1,"col","mt-3"],["role","alert",1,"alert","alert-danger"],[1,"register-form"],["formControlName","name","type","text","placeholder","Escribe tu nombre completo...",1,"form-control"],["formControlName","username","type","text","placeholder","Escribe un nombre de usuario...",1,"form-control"],["formControlName","email","type","email","placeholder","Escribe un correo electr\xf3nico...",1,"form-control"],[1,"mb-2"],["width","100px","height","100px",2,"object-fit","cover",3,"src"],["type","button",1,"btn","btn-link","ml-2",3,"click"],["hidden","","type","file",3,"change"],["photoInput",""],["formControlName","repeatPassword","type","password","placeholder","Escribe de nuevo tu contrase\xf1a...",1,"form-control"]],template:function(e,t){if(1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Pb(2,"h1"),i.Cc(3,"uSocial"),i.Ob(),i.Pb(4,"h5"),i.Cc(5,"Inicia sesi\xf3n o crea una cuenta para acceder."),i.Ob(),i.Ob(),i.Ob(),i.Pb(6,"div",2),i.Pb(7,"div",3),i.Ac(8,u,29,3,"div",4),i.Ac(9,p,54,4,"ng-template",null,5,i.Bc),i.Ob(),i.Ob()),2&e){const e=i.qc(10);i.xb(8),i.ic("ngIf",!t.showRegister)("ngIfElse",e)}},directives:[r.l,c.r,c.k,c.f,c.b,c.j,c.e],styles:["body[_ngcontent-%COMP%]{font-family:Lato,sans-serif}.main-head[_ngcontent-%COMP%]{height:150px;background:#fff}.sidenav[_ngcontent-%COMP%]{height:100%;background-color:#000;overflow-x:hidden;padding-top:20px}.main[_ngcontent-%COMP%]{padding:0 10px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}}@media screen and (max-width:450px){.login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]{margin-top:10%}}@media screen and (min-width:768px){.main[_ngcontent-%COMP%]{margin-left:40%}.sidenav[_ngcontent-%COMP%]{width:40%;position:fixed;z-index:1;top:0;left:0}.login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]{margin-top:20%}}.login-main-text[_ngcontent-%COMP%]{margin-top:20%;padding:60px;color:#fff}.login-main-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:300}.btn-black[_ngcontent-%COMP%]{background-color:#000!important;color:#fff}"]}),e})(),canActivate:[a]}];let f=(()=>{class e{}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(m)],n.d]}),e})(),h=(()=>{class e{}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(t){return new(t||e)},providers:[],imports:[[r.b,f,c.g,c.o]]}),e})()}}]);